(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34382877"],{"057f":function(e,t,r){var n=r("c6b6"),a=r("fc6a"),o=r("241c").f,c=r("4dae"),l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(e){try{return o(e)}catch(t){return c(l)}};e.exports.f=function(e){return l&&"Window"==n(e)?i(e):o(a(e))}},"428f":function(e,t,r){var n=r("da84");e.exports=n},"4dae":function(e,t,r){var n=r("da84"),a=r("23cb"),o=r("07fa"),c=r("8418"),l=n.Array,i=Math.max;e.exports=function(e,t,r){for(var n=o(e),s=a(t,n),d=a(void 0===r?n:r,n),u=l(i(d-s,0)),b=0;s<d;s++,b++)c(u,b,e[s]);return u.length=b,u}},"4de4":function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").filter,o=r("1dde"),c=o("filter");n({target:"Array",proto:!0,forced:!c},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"746f":function(e,t,r){var n=r("428f"),a=r("1a2d"),o=r("e538"),c=r("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});a(t,e)||c(t,e,{value:o.f(e)})}},a4d3:function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),o=r("d066"),c=r("2ba4"),l=r("c65b"),i=r("e330"),s=r("c430"),d=r("83ab"),u=r("4930"),b=r("d039"),f=r("1a2d"),m=r("e8b5"),p=r("1626"),O=r("861d"),h=r("3a9b"),j=r("d9b5"),g=r("825a"),v=r("7b0b"),y=r("fc6a"),V=r("a04b"),N=r("577e"),E=r("5c6c"),w=r("7c73"),P=r("df75"),x=r("241c"),k=r("057f"),M=r("7418"),S=r("06cf"),C=r("9bf2"),D=r("37e8"),U=r("d1e7"),z=r("f36a"),B=r("6eeb"),q=r("5692"),F=r("f772"),T=r("d012"),$=r("90e3"),_=r("b622"),J=r("e538"),I=r("746f"),L=r("d44e"),A=r("69f3"),Q=r("b727").forEach,W=F("hidden"),X="Symbol",G="prototype",H=_("toPrimitive"),K=A.set,R=A.getterFor(X),Y=Object[G],Z=a.Symbol,ee=Z&&Z[G],te=a.TypeError,re=a.QObject,ne=o("JSON","stringify"),ae=S.f,oe=C.f,ce=k.f,le=U.f,ie=i([].push),se=q("symbols"),de=q("op-symbols"),ue=q("string-to-symbol-registry"),be=q("symbol-to-string-registry"),fe=q("wks"),me=!re||!re[G]||!re[G].findChild,pe=d&&b((function(){return 7!=w(oe({},"a",{get:function(){return oe(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=ae(Y,t);n&&delete Y[t],oe(e,t,r),n&&e!==Y&&oe(Y,t,n)}:oe,Oe=function(e,t){var r=se[e]=w(ee);return K(r,{type:X,tag:e,description:t}),d||(r.description=t),r},he=function(e,t,r){e===Y&&he(de,t,r),g(e);var n=V(t);return g(r),f(se,n)?(r.enumerable?(f(e,W)&&e[W][n]&&(e[W][n]=!1),r=w(r,{enumerable:E(0,!1)})):(f(e,W)||oe(e,W,E(1,{})),e[W][n]=!0),pe(e,n,r)):oe(e,n,r)},je=function(e,t){g(e);var r=y(t),n=P(r).concat(Ne(r));return Q(n,(function(t){d&&!l(ve,r,t)||he(e,t,r[t])})),e},ge=function(e,t){return void 0===t?w(e):je(w(e),t)},ve=function(e){var t=V(e),r=l(le,this,t);return!(this===Y&&f(se,t)&&!f(de,t))&&(!(r||!f(this,t)||!f(se,t)||f(this,W)&&this[W][t])||r)},ye=function(e,t){var r=y(e),n=V(t);if(r!==Y||!f(se,n)||f(de,n)){var a=ae(r,n);return!a||!f(se,n)||f(r,W)&&r[W][n]||(a.enumerable=!0),a}},Ve=function(e){var t=ce(y(e)),r=[];return Q(t,(function(e){f(se,e)||f(T,e)||ie(r,e)})),r},Ne=function(e){var t=e===Y,r=ce(t?de:y(e)),n=[];return Q(r,(function(e){!f(se,e)||t&&!f(Y,e)||ie(n,se[e])})),n};if(u||(Z=function(){if(h(ee,this))throw te("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?N(arguments[0]):void 0,t=$(e),r=function(e){this===Y&&l(r,de,e),f(this,W)&&f(this[W],t)&&(this[W][t]=!1),pe(this,t,E(1,e))};return d&&me&&pe(Y,t,{configurable:!0,set:r}),Oe(t,e)},ee=Z[G],B(ee,"toString",(function(){return R(this).tag})),B(Z,"withoutSetter",(function(e){return Oe($(e),e)})),U.f=ve,C.f=he,D.f=je,S.f=ye,x.f=k.f=Ve,M.f=Ne,J.f=function(e){return Oe(_(e),e)},d&&(oe(ee,"description",{configurable:!0,get:function(){return R(this).description}}),s||B(Y,"propertyIsEnumerable",ve,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Z}),Q(P(fe),(function(e){I(e)})),n({target:X,stat:!0,forced:!u},{for:function(e){var t=N(e);if(f(ue,t))return ue[t];var r=Z(t);return ue[t]=r,be[r]=t,r},keyFor:function(e){if(!j(e))throw te(e+" is not a symbol");if(f(be,e))return be[e]},useSetter:function(){me=!0},useSimple:function(){me=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!d},{create:ge,defineProperty:he,defineProperties:je,getOwnPropertyDescriptor:ye}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:Ve,getOwnPropertySymbols:Ne}),n({target:"Object",stat:!0,forced:b((function(){M.f(1)}))},{getOwnPropertySymbols:function(e){return M.f(v(e))}}),ne){var Ee=!u||b((function(){var e=Z();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}));n({target:"JSON",stat:!0,forced:Ee},{stringify:function(e,t,r){var n=z(arguments),a=t;if((O(t)||void 0!==e)&&!j(e))return m(t)||(t=function(e,t){if(p(a)&&(t=l(a,this,e,t)),!j(t))return t}),n[1]=t,c(ne,null,n)}})}if(!ee[H]){var we=ee.valueOf;B(ee,H,(function(e){return l(we,this)}))}L(Z,X),T[W]=!0},b0c0:function(e,t,r){var n=r("83ab"),a=r("5e77").EXISTS,o=r("e330"),c=r("9bf2").f,l=Function.prototype,i=o(l.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(s.exec),u="name";n&&!a&&c(l,u,{configurable:!0,get:function(){try{return d(s,i(this))[1]}catch(e){return""}}})},cc55:function(e,t,r){"use strict";r.r(t);r("b0c0"),r("b64b");var n=r("7a23"),a={class:"container"},o={class:"text-end"},c={class:"table align-middle"},l=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th"),Object(n["createElementVNode"])("th",null,"品名"),Object(n["createElementVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["createElementVNode"])("th",{class:"text-end"},"單價")])],-1),i=["onClick"],s=Object(n["createElementVNode"])("div",{class:"text-success"},"已套用優惠券",-1),d={class:"input-group input-group-sm"},u={class:"input-group mb-3"},b=["onUpdate:modelValue","onChange"],f={class:"input-group-text",id:"basic-addon2"},m={class:"text-end"},p=Object(n["createElementVNode"])("small",{class:"text-success"},"折扣價：",-1),O={key:1},h=Object(n["createElementVNode"])("td",{colspan:"4",class:"text-center"},"購物車目前沒有商品",-1),j=[h],g=Object(n["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),v={class:"text-end"},y=Object(n["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),V={class:"text-end text-success"},N={class:"my-5 row justify-content-center"},E={class:"mb-3"},w=Object(n["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),P={class:"mb-3"},x=Object(n["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),k={class:"mb-3"},M=Object(n["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),S={class:"mb-3"},C=Object(n["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),D={class:"mb-3"},U=Object(n["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),z={class:"text-end"},B=["disabled"];function q(e,t,r,h,q,F){var T=this,$=Object(n["resolveComponent"])("delProductModal"),_=Object(n["resolveComponent"])("VField"),J=Object(n["resolveComponent"])("ErrorMessage"),I=Object(n["resolveComponent"])("VForm");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])($,{onDeleteProduct:F.deleteCarts,ref:"delModal"},null,8,["onDeleteProduct"]),Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])(["btn btn-outline-danger",{disabled:q.cart.carts.length<1}]),type:"button",onClick:t[0]||(t[0]=function(e){return F.openDelProductModal("all","所有")})}," 清空購物車 ",2)]),Object(n["createElementVNode"])("table",c,[l,Object(n["createElementVNode"])("tbody",null,[q.cart.carts.length>0?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(q.cart.carts,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return F.openDelProductModal("single",e.product.title,e)}}," x ",8,i)]),Object(n["createElementVNode"])("td",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.product.title)+" ",1),s]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("div",u,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return F.updateCarts("edit",e)}},null,40,b),[[n["vModelText"],e.qty,void 0,{lazy:!0}]]),Object(n["createElementVNode"])("span",f,Object(n["toDisplayString"])(e.product.unit),1)])])]),Object(n["createElementVNode"])("td",m,[p,Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.final_total),1)])])})),128)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",O,j))]),Object(n["createElementVNode"])("tfoot",null,[Object(n["createElementVNode"])("tr",null,[g,Object(n["createElementVNode"])("td",v,Object(n["toDisplayString"])(q.cart.total),1)]),Object(n["createElementVNode"])("tr",null,[y,Object(n["createElementVNode"])("td",V,Object(n["toDisplayString"])(q.cart.final_total),1)])])]),Object(n["createElementVNode"])("div",N,[Object(n["createVNode"])(I,{ref:"form",class:"col-md-6",onSubmit:F.submitOrder},{default:Object(n["withCtx"])((function(e){var r=e.errors;return[Object(n["createElementVNode"])("div",E,[w,Object(n["createVNode"])(_,{id:"email",name:"email",type:"email",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["email"]}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:q.order.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return q.order.user.email=e}),modelModifiers:{lazy:!0}},null,8,["class","modelValue"]),Object(n["createVNode"])(J,{name:"email",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",P,[x,Object(n["createVNode"])(_,{id:"name",name:"姓名",type:"text",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:q.order.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return q.order.user.name=e}),modelModifiers:{lazy:!0}},null,8,["class","modelValue"]),Object(n["createVNode"])(J,{name:"姓名",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",k,[M,Object(n["createVNode"])(_,{id:"tel",name:"電話",type:"tel",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["電話"]}]),placeholder:"請輸入電話",rules:{required:!0,numeric:!0,min:8,regex:/^09/},modelValue:q.order.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return q.order.user.tel=e}),modelModifiers:{lazy:!0}},null,8,["class","modelValue"]),Object(n["createVNode"])(J,{name:"電話",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",S,[C,Object(n["createVNode"])(_,{id:"address",name:"地址",type:"address",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:q.order.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return q.order.user.address=e}),modelModifiers:{lazy:!0}},null,8,["class","modelValue"]),Object(n["createVNode"])(J,{name:"地址",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",D,[U,Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[5]||(t[5]=function(e){return q.order.message=e})},null,512),[[n["vModelText"],q.order.message,void 0,{lazy:!0}]])]),Object(n["createElementVNode"])("div",z,[Object(n["createElementVNode"])("button",{type:"submit",class:"btn btn-danger",disabled:T.cart.carts.length<1||Object.keys(r).length>0}," 送出訂單 ",8,B)])]})),_:1},8,["onSubmit"])])])],64)}var F=r("5530"),T=(r("99af"),r("3d20")),$=r.n(T),_=r("e1a2"),J={data:function(){return{cart:{carts:[]},order:{user:{},message:""},apiUrl:"https://vue3-course-api.hexschool.io/v2",apiPath:"kn99"}},components:{delProductModal:_["a"]},methods:{getCarts:function(){var e=this,t=this.$loading.show();this.axios.get("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart")).then((function(r){t.hide(),e.cart=r.data.data})).catch((function(e){console.log(e.response)}))},updateCarts:function(e,t){var r=this,n=t.id,a=t.product_id,o=t.qty,c="post",l="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/");"edit"===e&&(c="put",l="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(n)),this.axios[c](l,{data:{product_id:a,qty:o}}).then((function(){r.hideProductModal(),r.getCarts()})).catch((function(e){console.log(e)}))},deleteCarts:function(e,t){var r=this,n="";"all"===e?n="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/carts/"):"single"===e&&(n="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(t.id)),this.axios.delete(n).then((function(){r.hideDelProductModal(),r.getCarts()})).catch((function(e){console.log(e)}))},openDelProductModal:function(e,t,r){this.$refs.delModal.openModal(e,t,r)},hideDelProductModal:function(){this.$refs.delModal.hideModal()},submitOrder:function(){var e=this,t=this.$loading.show();this.axios.post("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/order"),{data:Object(F["a"])({},this.order)}).then((function(r){t.hide();var n=r.data,a=n.message,o=n.total;$.a.fire("".concat(a,"，總金額為 ").concat(o)),e.$refs.form.resetForm(),e.order.message="",e.getCarts()})).catch((function(e){console.log(e)}))}},mounted:function(){this.getCarts()}},I=r("d959"),L=r.n(I);const A=L()(J,[["render",q]]);t["default"]=A},dbb4:function(e,t,r){var n=r("23e7"),a=r("83ab"),o=r("56ef"),c=r("fc6a"),l=r("06cf"),i=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,n=c(e),a=l.f,s=o(n),d={},u=0;while(s.length>u)r=a(n,t=s[u++]),void 0!==r&&i(d,t,r);return d}})},e1a2:function(e,t,r){"use strict";var n=r("7a23"),a={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},o={class:"modal-dialog"},c={class:"modal-content border-0"},l=Object(n["createElementVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(n["createElementVNode"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(n["createElementVNode"])("span",null,"刪除產品")]),Object(n["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),i={class:"modal-body"},s=Object(n["createTextVNode"])(" 是否刪除 "),d={class:"text-danger"},u=Object(n["createTextVNode"])(" 商品(刪除後將無法恢復)。 "),b={class:"modal-footer"},f=Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function m(e,t,r,m,p,O){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",c,[l,Object(n["createElementVNode"])("div",i,[s,Object(n["createElementVNode"])("strong",d,Object(n["toDisplayString"])(p.title),1),u]),Object(n["createElementVNode"])("div",b,[f,Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(){return O.deleteProduct&&O.deleteProduct.apply(O,arguments)})}," 確認刪除 ")])])])],512)}var p=r("7b17"),O={data:function(){return{modal:"",data:"",title:""}},methods:{deleteProduct:function(){this.$emit("delete-product",this.data.status,this.data.cart)},openModal:function(e,t,r){this.modal.show(),this.title=t,this.data={status:e,cart:r}},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new p["b"](document.getElementById("delProductModal"),{})}},h=r("d959"),j=r.n(h);const g=j()(O,[["render",m]]);t["a"]=g},e439:function(e,t,r){var n=r("23e7"),a=r("d039"),o=r("fc6a"),c=r("06cf").f,l=r("83ab"),i=a((function(){c(1)})),s=!l||i;n({target:"Object",stat:!0,forced:s,sham:!l},{getOwnPropertyDescriptor:function(e,t){return c(o(e),t)}})},e538:function(e,t,r){var n=r("b622");t.f=n}}]);
//# sourceMappingURL=chunk-34382877.da82c9e7.js.map