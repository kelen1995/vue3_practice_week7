(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8ac3470"],{"0cb2":function(e,t,n){var c=n("e330"),r=n("7b0b"),a=Math.floor,o=c("".charAt),l=c("".replace),i=c("".slice),d=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,u,b){var p=n+e.length,m=c.length,f=s;return void 0!==u&&(u=r(u),f=d),l(b,f,(function(r,l){var d;switch(o(l,0)){case"$":return"$";case"&":return e;case"`":return i(t,0,n);case"'":return i(t,p);case"<":d=u[i(l,1,-1)];break;default:var s=+l;if(0===s)return r;if(s>m){var b=a(s/10);return 0===b?r:b<=m?void 0===c[b-1]?o(l,1):c[b-1]+o(l,1):r}d=c[s-1]}return void 0===d?"":d}))}},"107c":function(e,t,n){var c=n("d039"),r=n("da84"),a=r.RegExp;e.exports=c((function(){var e=a("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"14c3":function(e,t,n){var c=n("da84"),r=n("c65b"),a=n("825a"),o=n("1626"),l=n("c6b6"),i=n("9263"),d=c.TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var c=r(n,e,t);return null!==c&&a(c),c}if("RegExp"===l(e))return r(i,e,t);throw d("RegExp#exec called on incompatible receiver")}},1799:function(e,t,n){"use strict";var c=n("7a23"),r={"aria-label":"Page navigation example"},a={class:"pagination justify-content-center"},o=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),l=[o],i=["onClick"],d={class:"page-link",href:"#"},s=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),u=[s];function b(e,t,n,o,s,b){return Object(c["openBlock"])(),Object(c["createElementBlock"])("nav",r,[Object(c["createElementVNode"])("ul",a,[Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:!n.pagination.has_pre}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(c["withModifiers"])((function(e){return b.switchPage(n.pagination.current_page-1)}),["prevent"]))},l)],2),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.pagination.total_pages,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{class:"page-item",key:e+1234,onClick:Object(c["withModifiers"])((function(t){return b.switchPage(e)}),["prevent"])},[Object(c["createElementVNode"])("a",d,Object(c["toDisplayString"])(e),1)],8,i)})),128)),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:!n.pagination.has_next}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(e){return b.switchPage(n.pagination.current_page+1)}),["prevent"]))},u)],2)])])}var p={props:["pagination"],data:function(){return{}},methods:{switchPage:function(e){this.$emit("switch-page",e)}}},m=n("d959"),f=n.n(m);const O=f()(p,[["render",b]]);t["a"]=O},5319:function(e,t,n){"use strict";var c=n("2ba4"),r=n("c65b"),a=n("e330"),o=n("d784"),l=n("d039"),i=n("825a"),d=n("1626"),s=n("5926"),u=n("50c4"),b=n("577e"),p=n("1d80"),m=n("8aa5"),f=n("dc4a"),O=n("0cb2"),j=n("14c3"),h=n("b622"),g=h("replace"),E=Math.max,v=Math.min,N=a([].concat),V=a([].push),x=a("".indexOf),k=a("".slice),y=function(e){return void 0===e?e:String(e)},S=function(){return"$0"==="a".replace(/./,"$0")}(),w=function(){return!!/./[g]&&""===/./[g]("a","$0")}(),B=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));o("replace",(function(e,t,n){var a=w?"$":"$0";return[function(e,n){var c=p(this),a=void 0==e?void 0:f(e,g);return a?r(a,e,c,n):r(t,b(c),e,n)},function(e,r){var o=i(this),l=b(e);if("string"==typeof r&&-1===x(r,a)&&-1===x(r,"$<")){var p=n(t,o,l,r);if(p.done)return p.value}var f=d(r);f||(r=b(r));var h=o.global;if(h){var g=o.unicode;o.lastIndex=0}var S=[];while(1){var w=j(o,l);if(null===w)break;if(V(S,w),!h)break;var B=b(w[0]);""===B&&(o.lastIndex=m(l,u(o.lastIndex),g))}for(var D="",C=0,I=0;I<S.length;I++){w=S[I];for(var $=b(w[0]),P=E(v(s(w.index),l.length),0),M=[],R=1;R<w.length;R++)V(M,y(w[R]));var _=w.groups;if(f){var F=N([$],M,P,l);void 0!==_&&V(F,_);var U=b(c(r,void 0,F))}else U=O($,l,P,M,_,r);P>=C&&(D+=k(l,C,P)+U,C=P+$.length)}return D+k(l,C)}]}),!B||!S||w)},"83d9":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r={class:"table mt-4"},a=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"購買時間"),Object(c["createElementVNode"])("th",null,"Email"),Object(c["createElementVNode"])("th",null,"購買款項"),Object(c["createElementVNode"])("th",null,"應付金額"),Object(c["createElementVNode"])("th",null,"是否付款"),Object(c["createElementVNode"])("th",null,"編輯")])],-1),o={class:"list-unstyled"},l={class:"form-check form-switch"},i=["for"],d=["id","onChange","onUpdate:modelValue"],s={class:"btn-group"},u=["onClick"],b=["onClick"];function p(e,t,n,p,m,f){var O=Object(c["resolveComponent"])("Pagination"),j=Object(c["resolveComponent"])("OrderModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("table",r,[a,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(m.orders,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(f.dateFormat(e.create_at)),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.user.email),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("ul",o,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e.id},Object(c["toDisplayString"])(e.product.title)+" "+Object(c["toDisplayString"])(e.qty)+" "+Object(c["toDisplayString"])(e.product.unit),1)})),128))])]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.total),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("label",{for:"isPaid".concat(e.id),class:"form-check-label"},[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.is_paid?"已付款":"未付款"),1)],8,i),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"isPaid".concat(e.id),type:"checkbox",class:"form-check-input",onChange:function(t){return f.updatePaid(e)},"onUpdate:modelValue":function(t){return e.is_paid=t}},null,40,d),[[c["vModelCheckbox"],e.is_paid]])])]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary btn-sm",onClick:function(t){return f.openOrderModal(e)}}," 檢視 ",8,u),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return f.openDelOrderConfirm(e.id)}}," 刪除 ",8,b)])])])})),128))])]),Object(c["createVNode"])(O,{pagination:m.pagination,onSwitchPage:f.getOrders},null,8,["pagination","onSwitchPage"]),Object(c["createVNode"])(j,{ref:"orderModal"},null,512)],64)}n("99af"),n("ac1f"),n("5319");var m=n("3d20"),f=n.n(m),O=n("1799"),j=(n("b0c0"),{class:"modal fade",tabindex:"-1",id:"orderModal"}),h={class:"modal-dialog"},g={class:"modal-content"},E=Object(c["createElementVNode"])("div",{class:"modal-header"},[Object(c["createElementVNode"])("h5",{class:"modal-title"},"訂單細節"),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v={class:"modal-body"},N={class:"container-fluid"},V={class:"row"},x={class:"col-md-6"},k=Object(c["createElementVNode"])("h6",null,"買家資訊",-1),y={class:"table"},S=Object(c["createElementVNode"])("th",null,"姓名",-1),w=Object(c["createElementVNode"])("th",null,"電話",-1),B=Object(c["createElementVNode"])("th",null,"Email",-1),D=Object(c["createElementVNode"])("th",null,"住址",-1),C={class:"col-md-6"},I=Object(c["createElementVNode"])("h6",null,"訂單資訊",-1),$={class:"table"},P=Object(c["createElementVNode"])("th",null,"訂單編號",-1),M=Object(c["createElementVNode"])("th",null,"購買時間",-1),R=Object(c["createElementVNode"])("th",null,"購買品項",-1),_={class:"list-unstyled"},F=Object(c["createElementVNode"])("th",null,"付款狀態",-1),U=Object(c["createElementVNode"])("th",null,"總金額",-1),A=Object(c["createElementVNode"])("div",{class:"modal-footer"},[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 "),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary"},"確認")],-1);function T(e,t,n,r,a,o){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",j,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",g,[E,Object(c["createElementVNode"])("div",v,[Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",x,[k,Object(c["createElementVNode"])("table",y,[Object(c["createElementVNode"])("tr",null,[S,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.order.user.name),1)]),Object(c["createElementVNode"])("tr",null,[w,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.order.user.tel),1)]),Object(c["createElementVNode"])("tr",null,[B,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.order.user.email),1)]),Object(c["createElementVNode"])("tr",null,[D,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.order.user.address),1)])])]),Object(c["createElementVNode"])("div",C,[I,Object(c["createElementVNode"])("table",$,[Object(c["createElementVNode"])("tr",null,[P,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.order.id),1)]),Object(c["createElementVNode"])("tr",null,[M,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(o.dateFormat(a.order.create_at)),1)]),Object(c["createElementVNode"])("tr",null,[R,Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("ul",_,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.order.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e.id},Object(c["toDisplayString"])(e.product.title)+" "+Object(c["toDisplayString"])(e.qty)+" "+Object(c["toDisplayString"])(e.product.unit),1)})),128))])])]),Object(c["createElementVNode"])("tr",null,[F,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.order.is_paid?"已付款":"未付款"),1)]),Object(c["createElementVNode"])("tr",null,[U,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.order.total),1)])])])])])]),A])])])}var L=n("7b17");function z(e){return e<10?"0".concat(e):e}function K(e){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(z(t.getMonth()+1),"/").concat(z(t.getDate()))}var Y={data:function(){return{modal:{},order:{user:{}}}},methods:{openModal:function(e){this.modal.show(),this.order=e},dateFormat:function(e){return K(e)}},mounted:function(){this.modal=new L["b"](document.getElementById("orderModal"),{})}},q=n("d959"),J=n.n(q);const X=J()(Y,[["render",T]]);var G=X,H={data:function(){return{apiUrl:"https://vue3-course-api.hexschool.io/v2",apiPath:"kn99",orders:[],pagination:{}}},components:{Pagination:O["a"],OrderModal:G},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/admin/orders?page=").concat(t);this.axios.get(n).then((function(t){var n=t.data,c=n.orders,r=n.pagination;e.orders=c,e.pagination=r})).catch((function(e){console.dir(e)}))},updatePaid:function(e){var t="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/admin/order/").concat(e.id);this.axios.put(t,{data:e}).then((function(e){console.log(e.data)})).catch((function(e){console.dir(e)}))},dateFormat:function(e){return K(e)},openOrderModal:function(e){this.$refs.orderModal.openModal(e)},openDelOrderConfirm:function(e){var t=this;f.a.fire({title:"是否要刪除訂單?",showCancelButton:!0,confirmButtonText:"確認刪除",cancelButtonText:"取消",reverseButtons:!0}).then((function(n){n.isConfirmed&&t.deleteOrder(e)}))},deleteOrder:function(e){var t=this;console.log(e);var n="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/admin/order/").concat(e);this.axios.delete(n).then((function(e){var n=e.data.success;n&&(f.a.fire("已刪除訂單"),t.getOrders())})).catch((function(e){console.dir(e)}))},checkUser:function(){var e=this,t=document.cookie.replace(/(?:(?:^|.*;\s*)hextoken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=t,this.axios.post("".concat(this.apiUrl,"/api/user/check")).then((function(){e.getOrders()})).catch((function(t){console.log(t),e.$router.push("/login")}))}},mounted:function(){this.checkUser()}};const Q=J()(H,[["render",p]]);t["default"]=Q},"8aa5":function(e,t,n){"use strict";var c=n("6547").charAt;e.exports=function(e,t,n){return t+(n?c(e,t).length:1)}},9263:function(e,t,n){"use strict";var c=n("c65b"),r=n("e330"),a=n("577e"),o=n("ad6d"),l=n("9f7f"),i=n("5692"),d=n("7c73"),s=n("69f3").get,u=n("fce3"),b=n("107c"),p=i("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,f=m,O=r("".charAt),j=r("".indexOf),h=r("".replace),g=r("".slice),E=function(){var e=/a/,t=/b*/g;return c(m,e,"a"),c(m,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),v=l.BROKEN_CARET,N=void 0!==/()??/.exec("")[1],V=E||N||v||u||b;V&&(f=function(e){var t,n,r,l,i,u,b,V=this,x=s(V),k=a(e),y=x.raw;if(y)return y.lastIndex=V.lastIndex,t=c(f,y,k),V.lastIndex=y.lastIndex,t;var S=x.groups,w=v&&V.sticky,B=c(o,V),D=V.source,C=0,I=k;if(w&&(B=h(B,"y",""),-1===j(B,"g")&&(B+="g"),I=g(k,V.lastIndex),V.lastIndex>0&&(!V.multiline||V.multiline&&"\n"!==O(k,V.lastIndex-1))&&(D="(?: "+D+")",I=" "+I,C++),n=new RegExp("^(?:"+D+")",B)),N&&(n=new RegExp("^"+D+"$(?!\\s)",B)),E&&(r=V.lastIndex),l=c(m,w?n:V,I),w?l?(l.input=g(l.input,C),l[0]=g(l[0],C),l.index=V.lastIndex,V.lastIndex+=l[0].length):V.lastIndex=0:E&&l&&(V.lastIndex=V.global?l.index+l[0].length:r),N&&l&&l.length>1&&c(p,l[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(l[i]=void 0)})),l&&S)for(l.groups=u=d(null),i=0;i<S.length;i++)b=S[i],u[b[0]]=l[b[1]];return l}),e.exports=f},"9f7f":function(e,t,n){var c=n("d039"),r=n("da84"),a=r.RegExp,o=c((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),l=o||c((function(){return!a("a","y").sticky})),i=o||c((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:i,MISSED_STICKY:l,UNSUPPORTED_Y:o}},ac1f:function(e,t,n){"use strict";var c=n("23e7"),r=n("9263");c({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,n){"use strict";var c=n("825a");e.exports=function(){var e=c(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,n){var c=n("83ab"),r=n("5e77").EXISTS,a=n("e330"),o=n("9bf2").f,l=Function.prototype,i=a(l.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=a(d.exec),u="name";c&&!r&&o(l,u,{configurable:!0,get:function(){try{return s(d,i(this))[1]}catch(e){return""}}})},d784:function(e,t,n){"use strict";n("ac1f");var c=n("e330"),r=n("6eeb"),a=n("9263"),o=n("d039"),l=n("b622"),i=n("9112"),d=l("species"),s=RegExp.prototype;e.exports=function(e,t,n,u){var b=l(e),p=!o((function(){var t={};return t[b]=function(){return 7},7!=""[e](t)})),m=p&&!o((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[d]=function(){return n},n.flags="",n[b]=/./[b]),n.exec=function(){return t=!0,null},n[b](""),!t}));if(!p||!m||n){var f=c(/./[b]),O=t(b,""[e],(function(e,t,n,r,o){var l=c(e),i=t.exec;return i===a||i===s.exec?p&&!o?{done:!0,value:f(t,n,r)}:{done:!0,value:l(n,t,r)}:{done:!1}}));r(String.prototype,e,O[0]),r(s,b,O[1])}u&&i(s[b],"sham",!0)}},fce3:function(e,t,n){var c=n("d039"),r=n("da84"),a=r.RegExp;e.exports=c((function(){var e=a(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-f8ac3470.878dd14c.js.map